<?php while ($row = mysqli_fetch_assoc($result)) { ?>
                        <tr>
                            <td><?= $row['id'] ?></td>
                            <td style="width: 210px;"><?= $row['title'] ?></td>
                            <td><?= $row['author'] ?></td>
                            <td><?= $row['year'] ?></td>
                            <td style="width: 20px;"><?= $row['department'] ?></td>
                            <td style="width: 20px;"><?= $row['status'] ?></td>
                            <td class="actions">
                                <button class="btn-view" style="margin-bottom: 10px;"><a style="text-decoration:none; color: white; padding: 10px;" href="/archive/web/viewer.html?file=<?php echo 'http://localhost/archive/user/uploads/' . rawurlencode(basename($row['file'])); ?>" >View</a></button><br>
                                <button class="btn-edit" style="margin-bottom: 10px;"> <a style="text-decoration:none; padding-left: 20px; color: white; padding: 10px; margin-right: 13px;" href="edit.php?id=<?= $row['id'] ?>">Edit</a></button><br>
                                <button class="btn-delete" style="margin-bottom: 10px;"> <a style="text-decoration:none; border-radius: 5px; padding-left: 20px; color: white; padding: 10px;" onclick="return confirm('Archive this abstract?')" href="archive.php?id=<?= $row['id'] ?>">Archive</a></button><br>    
                            </td>
                        </tr>
                        <?php } ?>

                        <?php
        if ($result && $result->num_rows > 0) {
            while ($row = $result->fetch_assoc()) {
                echo "<tr>";
                echo "<td>" . htmlspecialchars($row['title']) . "</td>";
                echo "<td>" . htmlspecialchars($row['author']) . "</td>";
                echo "<td>" . htmlspecialchars($row['department']) . "</td>";
                echo "<td>" . htmlspecialchars($row['year']) . "</td>";

                // âœ… Actions column (View PDF or message)
                echo "<td>";
                if (!empty($row['file'])) {
                    $fileName = basename($row['file']);
                    $filePath = 'http://localhost/archive/user/uploads/' . $fileName;
                    echo '<a href="/archive/web/viewer.html?file=' . $filePath . '" target="_blank"><button class="btn-view" style="background: #3498db; border: none; padding: 10px 20px 10px 20px;
                    border-radius: 6px; cursor: pointer; color: white; margin-left: 10px;"> View </button></a>';
                } else {
                    echo '<span style="color:red;">No file uploaded</span>';
                }
                echo "</td>";

                echo "</tr>";
            }
        } else {
            echo '<tr><td colspan="5" style="text-align:center;">No records found.</td></tr>';
        }
        ?>


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Filter Button Fix</title>
<style>
body {
  font-family: Poppins, sans-serif;
  background: #f4f6f8;
  padding: 50px;
  display: flex;
  justify-content: center;
}

.container {
  background: white;
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  padding: 30px;
  width: 100%;
  max-width: 400px;
  text-align: center;
}

.btn-filter {
  background-color: #7b12bd;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 10px 18px;
  cursor: pointer;
}

.filter-container {
  position: relative;
  display: inline-block;
}

.filter-dropdown {
  position: absolute;
  top: 45px;
  right: 0;
  background: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  width: 200px;
  padding: 12px;
  display: none;
  z-index: 9999;
}

.filter-dropdown.active {
  display: block;
}
</style>
</head>
<body>

<div class="container">
  <h2>Filter Button Test</h2>
  <div class="filter-container">
    <!-- ðŸ‘‡ notice the important part -->
    <button id="filterBtn" type="button" class="btn-filter">Filter â–¼</button>

    <div id="filterDropdown" class="filter-dropdown">
      <label>Sort:</label>
      <select>
        <option>A-Z</option>
        <option>Z-A</option>
      </select><br>
      <label>Department:</label>
      <select>
        <option>BSIT</option>
        <option>BEED</option>
      </select>
    </div>
  </div>
</div>

<script>
// select elements safely
const filterBtn = document.getElementById('filterBtn');
const filterDropdown = document.getElementById('filterDropdown');

// toggle dropdown on click
filterBtn.addEventListener('click', (e) => {
  e.preventDefault(); // âœ… stop form submission
  e.stopPropagation(); // âœ… stop event bubbling
  filterDropdown.classList.toggle('active');
});

// keep dropdown open if clicking inside it
filterDropdown.addEventListener('click', (e) => e.stopPropagation());

// close dropdown when clicking outside
document.addEventListener('click', () => filterDropdown.classList.remove('active'));
</script>

</body>
</html>
